@using WF.Entity;
    @{
        ViewBag.Title = "NodeDetail";
        Layout = "~/Views/Shared/PopLayout.cshtml";
        List<Employee> listemp = ViewBag.emplist as List<Employee>;
    }
<script type="text/javascript">
    $(document).ready(function () {
        $("#ddlProcessTypeValue").keydown(function () {
            $("#ddlProcessTypeValue").autocomplete({
                minLength: 0,
                source: function (request, response) {
                    $.ajax({
                        url: "../Account/getEmpForAutocomplete",
                        type: "POST",
                        dataType: "json",
                        data: { "key": $("#ddlProcessTypeValue").val() },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.UserName + "（" + item.UserCode + ")",
                                    value: item.UserCode
                                }
                            }));
                        }
                    });
                },
                select: function (event, ui) {
                    $("#hidUserCode").val(ui.item.value);
                    $("#ddlProcessTypeValue").val(ui.item.label);
                    return false;
                }
            });
        });
    });

</script>
    <input type="hidden" id="hidkey" value="@ViewBag.key" />
<input type="hidden" id="hidUserCode" />
    <div class="page-header">
        <h1>
            添加流程角色人员
        </h1>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <form class="form-horizontal" role="form">
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtKey"> <i style="color: red; vertical-align: middle;">*</i> 节点key </label>
                    <div class="col-sm-9">
                        <input type="text" id="txtKey" maxlength="30" placeholder="流程节点key"
                               class="col-xs-10 col-sm-5" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtName"> <i style="color: red; vertical-align: middle;">*</i> 节点名称 </label>
                    <div class="col-sm-9">
                        <input type="text" id="txtName" maxlength="30" placeholder="节点名称"
                               class="col-xs-10 col-sm-5" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtDescription"> <i style="color: red; vertical-align: middle;">*</i> 节点描述 </label>
                    <div class="col-sm-9">
                        <textarea id="txtDescription" maxlength="300" placeholder="节点描述" class="col-xs-10 col-sm-5"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtProcessType"> <i style="color: red; vertical-align: middle;">*</i> 处理类型 </label>
                    <div class="col-sm-9">
                        <select class="col-xs-10 col-sm-5" id="txtProcessType">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="ddlRole"> <i style="color: red; vertical-align: middle;">*</i> 处理人 </label>
                    <div class="col-sm-9">
                        <select class="col-xs-10 col-sm-5" id="ddlRole">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="ddlProcessTypeValue"> <i style="color: red; vertical-align: middle;">*</i> 处理人 </label>
                    <div class="col-sm-9">
                        <input type="text" id="ddlProcessTypeValue" maxlength="30" placeholder="处理人"
                               class="col-xs-10 col-sm-5" />
                       
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="ddlExecType"> <i style="color: red; vertical-align: middle;">*</i> 执行模式 </label>
                    <div class="col-sm-9">
                        <select class="col-xs-10 col-sm-5" id="ddlExecType">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtTimeLimit"> <i style="color: red; vertical-align: middle;">*</i> 超期时限(分钟) </label>
                    <div class="col-sm-9">
                        <input type="number" id="txtTimeLimit" maxlength="30" placeholder="超期时限"
                               class="col-xs-10 col-sm-5" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="txtUrl"> <i style="color: red; vertical-align: middle;">*</i> 执行URL </label>
                    <div class="col-sm-9">
                        <input type="text" id="txtUrl" maxlength="30" placeholder="执行URL"
                               class="col-xs-10 col-sm-5" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="chkIsBack"><i style="color: red; vertical-align: middle;">*</i> 是否允许回退   </label>
                    <div class="col-sm-9">
                        <div class="switch">
                            <input id="chkIsBack" type="checkbox" checked="checked" data-on-text="允许" data-off-text="禁止" />
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-3 control-label no-padding-right" for="ddlBackType"> <i style="color: red; vertical-align: middle;">*</i> 回退策略 </label>
                    <div class="col-sm-9">
                        <select class="col-xs-10 col-sm-5" id="ddlBackType">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                </div>

            </form>
        </div>
        <!-- PAGE CONTENT END -->
    </div>

    <div class="clearfix form-actions">
        <div class="col-md-offset-3 col-md-9">
            <button id="btnOk" class="btn btn-info" type="button" onclick="save()">
                <i class="ace-icon fa fa-check bigger-110"></i>
                确认
            </button>
            &nbsp; &nbsp; &nbsp;
            <button id="btnBack" class="btn" type="button" onclick="goBack()">
                <i class="ace-icon fa fa-undo bigger-110"></i>
                返回
            </button>
        </div>
    </div>




