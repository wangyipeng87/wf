
@{
    ViewBag.Title = "RuleDetail";
    Layout = "~/Views/Shared/PopLayout.cshtml";
}

 
<script type="text/javascript">
    var rule;
    $(document).ready(function () {
        rule = parent.getRuleByKey($("#hidkey").val());
        initNode();
    });
    function initNode() {
        if (rule != null && rule != undefined) {
            $("#txtKey").val(rule.key);
            $("#txtExpression").val(rule.expression);
            $("#txtDescription").val(rule.text);
            
        }
    }
    function save() {
        if (rule != null && rule != undefined) {
            rule.key = $.trim($("#txtKey").val());
            rule.expression = $.trim($("#txtExpression").val());
            rule.text = $.trim($("#txtDescription").val());
            
            rule.updatestate({
                key: rule.key,
                text: rule.text,
                expression: rule.expression
            });
            parent.layer.closeAll();
        }
    } function closewin() {
        parent.layer.closeAll();
    }
</script>
<input type="hidden" id="hidkey" value="@ViewBag.key" />
<input type="hidden" id="hidUserCode" />
<div class="page-header">
    <h1>
        流程规则设置
    </h1>
</div>
<div class="row">
    <div class="col-xs-12">
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="txtKey"> <i style="color: red; vertical-align: middle;">*</i> 规则key </label>
                <div class="col-sm-9">
                    <input type="text" id="txtKey" maxlength="30" placeholder="规则key"
                           class="col-xs-10 col-sm-5" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="txtExpression"> <i style="color: red; vertical-align: middle;">*</i> 表达式 </label>
                <div class="col-sm-9">
                    <textarea  id="txtExpression"  placeholder="表达式"  class="col-xs-10 col-sm-5" ></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="txtDescription"> <i style="color: red; vertical-align: middle;">*</i> 规则描述 </label>
                <div class="col-sm-9">
                    <textarea id="txtDescription" maxlength="300" placeholder="规则描述" class="col-xs-10 col-sm-5"></textarea>
                </div>
            </div>
        </form>
    </div>
    <!-- PAGE CONTENT END -->
</div>

<div class="clearfix form-actions">
    <div class="col-md-offset-3 col-md-9">
        <button id="btnOk" class="btn btn-info" type="button" onclick="save()">
            <i class="ace-icon fa fa-check bigger-110"></i>
            确认
        </button>
        &nbsp; &nbsp; &nbsp;
        <button id="btnBack" class="btn" type="button" onclick="closewin()">
            <i class="ace-icon fa fa-undo bigger-110"></i>
            返回
        </button>
    </div>
</div>






